<!DOCTYPE html>
<html lang="en">
  <head><%- include('partials/head') %></head>
  <body>
    <%- include('partials/nav') %>
    <main class="container">
      <h2><%= board.name %></h2>
      <p class="muted"><%= board.description %></p>

      <!-- HTML form that writes to the API (via pages route) -->
      <form class="create" method="post" action="/boards/<%= board.id %>/tasks">
        <input name="title" placeholder="New task title" required />
        <input name="assignee" placeholder="Assignee" />
        <select name="status">
          <option>Backlog</option>
          <option>In Progress</option>
          <option>Done</option>
        </select>
        <input name="points" type="number" min="1" max="13" value="1" />
        <button class="btn">Add Task</button>
      </form>

      <table class="table">
        <thead>
          <tr>
            <th>ID</th><th>Title</th><th>Assignee</th><th>Status</th><th>Points</th>
          </tr>
        </thead>
        <tbody>
          <% tasks.forEach(t => { %>
            <tr>
              <td><%= t.id %></td>
              <td><%= t.title %></td>
              <td><%= t.assignee %></td>
              <td><%= t.status %></td>
              <td><%= t.points %></td>
            </tr>
          <% }) %>
        </tbody>
      </table>

      <div class="actions">
        <a class="btn" href="/api/tasks?boardId=<%= board.id %>">View as JSON</a>
        <a class="btn" href="/boards/<%= board.id %>/export.csv">Export CSV</a>
      </div>
    </main>
  </body>
</html>